#!/usr/bin/env python
"MyDraw main"

#import psyco
#psyco.full()

import gtk, sys
gdk = gtk.gdk

try: # just for a nice error message
    import mydrawwidget
    del mydrawwidget
except ImportError, detail:
    print 'ImportError:', detail
    print "\nYou need to 'make' the C modules first.\n"
    sys.exit(1)

import application

def init_input():
    "make those pressure sensitive devices working"
    pressure_devices = []
    for device in gdk.devices_list():
        if device.source in [gdk.SOURCE_PEN, gdk.SOURCE_ERASER]:
            pressure_devices.append(device)
    if pressure_devices:
        print 'Setting "screen mode" for pressure_sensitive devices:'
        for device in pressure_devices:
            print device.name
            device.set_mode(gdk.MODE_SCREEN)
    else:
        print 'No pressure sensitive devices found.'

def main():
    init_input()
    app = application.Application()
    gtk.main()

if __name__ == '__main__':
    main()

