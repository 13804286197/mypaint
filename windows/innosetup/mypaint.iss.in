; Inno Setup compiler script.
; THIS FILE IS AUTOMATICALLY GENERATED BY MYPAINT'S windows/build.sh
; Output is a setup.exe for MyPaint in the parent folder.

[Setup]
AppName=MyPaint w@BITS@
AppVersion=@VERSION@
AppPublisher=Martin Renold and the MyPaint Development Team
AppPublisherURL=http://mypaint.org/
AppComments=MyPaint is a simple drawing and painting program that works well with Wacom-style graphics tablets.
DefaultDirName={pf@BITS@}\MyPaint
DefaultGroupName=MyPaint w@BITS@
SetupIconFile=mypaint.ico
WizardImageFile=wizardimage.bmp
OutputDir=..
OutputBaseFilename=@OUTPUTBASENAME@
AppSupportURL=https://github.com/mypaint/mypaint/issues
AppReadmeFile=https://github.com/mypaint/mypaint/blob/master/README.md
AppUpdatesURL=https://github.com/mypaint/mypaint/releases
ChangesAssociations=yes

[Tasks]
Name: associateOra; Description: "&Associate "".ora"" files with MyPaint w@BITS@"; GroupDescription: "File extensions:"

[Registry]
Root: HKCR; Subkey: ".ora"; ValueType: string; ValueName: ""; ValueData: "OpenRasterFile"; Flags: uninsdeletevalue; Tasks: associateOra
Root: HKCR; Subkey: ".ora"; ValueType: string; ValueName: "PerceivedType"; ValueData: "image"; Flags: uninsdeletevalue; Tasks: associateOra
Root: HKCR; Subkey: ".ora"; ValueType: string; ValueName: "Content Type"; ValueData: "image/openraster"; Flags: uninsdeletevalue; Tasks: associateOra
Root: HKCR; Subkey: "OpenRasterFile"; ValueType: string; ValueName: ""; ValueData: "OpenRaster File"; Flags: uninsdeletekey; Tasks: associateOra
Root: HKCR; Subkey: "OpenRasterFile\DefaultIcon"; ValueType: string; ValueName: ""; ValueData: "{app}\share\mypaint\mypaint.ico"; Tasks: associateOra
Root: HKCR; Subkey: "OpenRasterFile\shell\open\command"; ValueType: string; ValueName: ""; ValueData: """{app}\bin\python2w.exe"" ""{app}\bin\mypaint"" ""%1"""; Tasks: associateOra
Root: HKCR; Subkey: "OpenRasterFile\shell\EditWithMyPaintW@BITS@"; ValueType: string; ValueName: ""; ValueData: "Edit with &MyPaint w@BITS@"; Tasks: associateOra
Root: HKCR; Subkey: "OpenRasterFile\shell\EditWithMyPaintW@BITS@\command"; ValueType: string; ValueName: ""; ValueData: """{app}\bin\python2w.exe"" ""{app}\bin\mypaint"" ""%1"""; Tasks: associateOra

[Files]
Source: "mingw@BITS@\*"; DestDir: "{app}"; Flags: ignoreversion recursesubdirs createallsubdirs

[Icons]
Name: "{group}\MyPaint w@BITS@"; Filename: "{app}\bin\python2w.exe"; Parameters: "bin\mypaint"; WorkingDir: "{app}"; Comment: "Simple drawing and painting program"; IconFilename: "{app}\share\mypaint\mypaint.ico"
Name: "{group}\Development\Github"; Filename: "https://github.com/mypaint"
Name: "{group}\Development\MyPaint w@BITS@ (console debug)"; Filename: "{app}\bin\mypaint-debug.bat"; WorkingDir: "{app}"; Comment: "Run MyPaint in debug mode and show its console output"; IconFilename: "{app}\share\mypaint\mypaint.ico"
Name: "{group}\Website and Blog"; Filename: "http://mypaint.org"
Name: "{group}\Twitter"; Filename: "http://twitter.com/MyPaintApp"

[Run]
Filename: "{app}\bin\mypaint-postinst.cmd"; Flags: shellexec runascurrentuser runhidden

[UninstallRun]
Filename: "{app}\bin\mypaint-prerm.cmd"; Flags: shellexec runascurrentuser runhidden
